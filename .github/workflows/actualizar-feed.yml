name: Actualizar noticias diarias

on:
  schedule:
    # Se ejecuta todos los dÃ­as a las 07:00 UTC â‰ˆ 08:00 en Madrid
    - cron: "0 7 * * *"
  workflow_dispatch: {}

permissions:
  contents: write

jobs:
  actualizar-feed:
    runs-on: ubuntu-latest

    steps:
      - name: Clonar repositorio
        uses: actions/checkout@v4

      - name: Generar archivo XML actualizado (hora Madrid)
        run: |
          mkdir -p docs
          FECHA=$(TZ="Europe/Madrid" date +"%d/%m/%Y")
          PUBDATE=$(TZ="Europe/Madrid" date -R)

          cat > docs/noticias-diarias.xml.txt <<EOF
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
  <channel>
    <title>Noticias Diarias - EspaÃ±a</title>
    <link>https://edekmm.github.io/Noticias-diarias/docs/noticias-diarias.xml.txt</link>
    <description>Noticias destacadas en EspaÃ±a, Madrid, economÃ­a mundial, economÃ­a espaÃ±ola, construcciÃ³n y Grupo ACS / Dragados.</description>
    <language>es-es</language>

    <item>
      <title>Noticias del dÃ­a ${FECHA}</title>
      <description><![CDATA[
      ğŸ‡ªğŸ‡¸ <b>Noticias en EspaÃ±a:</b><br>
      - Titular nacional del dÃ­a ${FECHA}<br><br>

      ğŸ™ï¸ <b>Noticias en Madrid:</b><br>
      - Titular Madrid del dÃ­a ${FECHA}<br><br>

      ğŸŒ <b>EconomÃ­a mundial:</b><br>
      - Titular internacional del dÃ­a ${FECHA}<br><br>

      ğŸ’¶ <b>EconomÃ­a en EspaÃ±a:</b><br>
      - Titular econÃ³mico del dÃ­a ${FECHA}<br><br>

      ğŸ—ï¸ <b>Sector de la construcciÃ³n:</b><br>
      - Titular del sector del dÃ­a ${FECHA}<br><br>

      ğŸ¢ <b>Grupo ACS / Dragados S.A.:</b><br>
      - Titular corpora
